<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Calon Mantu Idaman Mobile</title>
    <style>
        /* RESET & DASAR */
        body {
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            font-family: 'Arial Rounded MT Bold', 'Verdana', sans-serif;
            overflow: hidden; /* Mencegah scroll */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            height: 100dvh; /* Support mobile browser bars */
        }

        /* CONTAINER UTAMA (Menjaga Rasio Gambar) */
        #game-container {
            position: relative;
            width: auto;
            height: 100%;
            aspect-ratio: 9/16; /* Rasio umum HP */
            background-image: url('https://res.cloudinary.com/dsutaioqw/image/upload/v1770514507/board_gukevw.png'); /* Ganti URL jika perlu */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
        }

        /* --- UI OVERLAYS (Menggunakan % agar responsif) --- */
        
        /* 1. STATUS BAR (ATAS) */
        .stat-text {
            position: absolute;
            color: #5d4037; /* Warna coklat tua sesuai desain */
            font-weight: 800;
            font-size: 1.8vh; /* Ukuran font ikut tinggi layar */
            z-index: 10;
        }

        /* Posisi Hati (Heart) */
        #ui-hati {
            top: 7.5%;
            left: 36%;
            transform: translate(-50%, -50%);
        }

        /* Posisi Uang (Money) */
        #ui-uang {
            top: 7.5%;
            left: 62%;
            transform: translate(-50%, -50%);
        }

        /* Avatar Player (Kanan Atas - Lingkaran Kosong) */
        #p1-avatar {
            position: absolute;
            top: 3.5%;
            right: 4.5%;
            width: 13%;
            height: 7.5%;
            border-radius: 50%;
            background-image: url('https://api.dicebear.com/7.x/avataaars/svg?seed=Felix'); /* Contoh Avatar */
            background-size: cover;
            border: 2px solid white;
        }

        /* Avatar Musuh (Kiri Atas - Lingkaran Kosong) */
        #p2-avatar {
            position: absolute;
            top: 3.5%;
            left: 4.5%;
            width: 13%;
            height: 7.5%;
            border-radius: 50%;
            background-image: url('https://api.dicebear.com/7.x/avataaars/svg?seed=Grandma'); /* Contoh Camer */
            background-size: cover;
            opacity: 0.7; /* Sedikit transparan karena musuh */
        }

        /* 2. AREA TOMBOL (BAWAH) */
        /* Kita buat area transparan di atas gambar tombol agar bisa diklik */
        
        /* Tombol Kocok Dadu (Tengah) */
        #btn-kocok {
            position: absolute;
            bottom: 4%;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 10%;
            background: rgba(255, 0, 0, 0); /* Transparan */
            border-radius: 20px;
            cursor: pointer;
            z-index: 20;
        }
        /* Efek saat ditekan */
        #btn-kocok:active {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Tombol Kartu (Kiri Bawah) */
        #btn-kartu {
            position: absolute;
            bottom: 4.5%;
            left: 6%;
            width: 18%;
            height: 9%;
            background: rgba(0, 255, 0, 0);
            cursor: pointer;
            border-radius: 10px;
        }

        /* Tombol Info (Kanan Bawah) */
        #btn-info {
            position: absolute;
            bottom: 4.5%;
            right: 6%;
            width: 18%;
            height: 9%;
            background: rgba(0, 0, 255, 0);
            cursor: pointer;
            border-radius: 10px;
        }

        /* 3. PAPAN PERMAINAN & BIDAK */
        /* Area Grid (Hanya untuk debugging, set opacity 0 nanti) */
        #board-area {
            position: absolute;
            top: 19.5%;
            left: 2%;
            width: 96%;
            height: 54%;
            /* border: 1px solid red; */ 
            pointer-events: none;
        }

        .player-pion {
            position: absolute;
            width: 8%;
            height: 0;
            padding-bottom: 8%; /* Membuat aspek rasio 1:1 */
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.5);
            transition: all 0.3s ease-in-out; /* Animasi gerak halus */
            z-index: 15;
        }

        #p1-pion {
            background-color: #3498db; /* Biru */
            transform: translate(-50%, -50%); /* Center anchor */
        }

        #p2-pion {
            background-color: #e74c3c; /* Merah */
            transform: translate(-20%, -20%); /* Offset sedikit biar gak numpuk */
            scale: 0.8;
        }

        /* POPUP NOTIFIKASI */
        #game-msg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #e67e22;
            text-align: center;
            width: 70%;
            display: none;
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="p2-avatar"></div> <div id="p1-avatar"></div> <div id="ui-hati" class="stat-text">0</div>
        <div id="ui-uang" class="stat-text">20</div>

        <div id="p1-pion" class="player-pion"></div>
        <div id="p2-pion" class="player-pion"></div>

        <div id="btn-kartu" onclick="alert('Fitur Kartu belum aktif!')"></div>
        <div id="btn-kocok" onclick="mainkanGiliran()"></div>
        <div id="btn-info" onclick="alert('Versi Prototype v1.0')"></div>

        <div id="game-msg">
            <h3 id="msg-title" style="margin:0 0 10px 0; color:#d35400;">Info</h3>
            <p id="msg-body" style="margin:0; font-size:14px;">Selamat Datang!</p>
        </div>
    </div>

    <script>
        // --- KONFIGURASI KOORDINAT ---
        // Kita petakan 16 kotak berdasarkan % Top dan % Left dari gambar Background
        // Koordinat ini disesuaikan manual agar pas di tengah kotak gambar
        const tileCoords = [
            { id: 1,  x: 11, y: 68 }, // Start (Kiri Bawah)
            { id: 2,  x: 31, y: 68 },
            { id: 3,  x: 50, y: 68 },
            { id: 4,  x: 69, y: 68 },
            { id: 5,  x: 89, y: 68 }, // Pojok Kanan Bawah (Pos Ronda)
            
            { id: 6,  x: 89, y: 56 }, // Naik
            { id: 7,  x: 89, y: 44 },
            { id: 8,  x: 89, y: 32 },
            { id: 9,  x: 89, y: 24 }, // Pojok Kanan Atas (RSJ)
            
            { id: 10, x: 69, y: 24 }, // Ke Kiri
            { id: 11, x: 50, y: 24 },
            { id: 12, x: 31, y: 24 },
            { id: 13, x: 11, y: 24 }, // Pojok Kiri Atas (Ekstrem)
            
            { id: 14, x: 11, y: 35 }, // Turun
            { id: 15, x: 11, y: 47 },
            { id: 16, x: 11, y: 58 }  // Nekat Melamar
        ];

        // --- DATA PEMAIN ---
        let player = { pos: 0, uang: 20, hati: 0 };
        let enemy = { pos: 0, uang: 20, hati: 0 };
        let isTurn = true; // Giliran Player

        // Inisialisasi Posisi Awal
        function updatePosition() {
            // Player
            const pCoord = tileCoords[player.pos];
            const p1El = document.getElementById('p1-pion');
            p1El.style.left = pCoord.x + "%";
            p1El.style.top = pCoord.y + "%";

            // Enemy (Sepupu)
            const eCoord = tileCoords[enemy.pos];
            const p2El = document.getElementById('p2-pion');
            p2El.style.left = eCoord.x + "%";
            p2El.style.top = eCoord.y + "%";

            // Update UI Teks
            document.getElementById('ui-uang').innerText = player.uang;
            document.getElementById('ui-hati').innerText = player.hati;
        }

        // Fungsi Menampilkan Pesan
        function showMsg(title, text) {
            const el = document.getElementById('game-msg');
            document.getElementById('msg-title').innerText = title;
            document.getElementById('msg-body').innerText = text;
            el.style.display = 'block';
            
            // Hilang otomatis setelah 2 detik
            setTimeout(() => {
                el.style.display = 'none';
            }, 2000);
        }

        // LOGIKA PERMAINAN SEDERHANA
        function mainkanGiliran() {
            if (!isTurn) return; // Mencegah spam klik

            // 1. Kocok Dadu
            let dadu = Math.floor(Math.random() * 6) + 1;
            showMsg("Dadu!", "Kamu dapat angka " + dadu);

            // 2. Gerakan Player
            let stepCount = 0;
            const moveInterval = setInterval(() => {
                player.pos++;
                if (player.pos >= 16) {
                    player.pos = 0; // Loop kembali ke start
                    player.uang += 5; // Gaji
                    showMsg("Gajian!", "Lewat start dapat +5 Uang");
                }
                updatePosition();
                stepCount++;

                if (stepCount >= dadu) {
                    clearInterval(moveInterval);
                    handleEffect(player.pos);
                    isTurn = true; // (Prototype: Player main terus utk testing)
                }
            }, 300);
        }

        function handleEffect(pos) {
            // Contoh efek sederhana berdasarkan nomor kotak
            setTimeout(() => {
                if (pos === 4) { // Pos Ronda
                    showMsg("Pos Ronda", "Aman, numpang ngopi.");
                } else if (pos === 8) { // RSJ
                    showMsg("RSJ", "Masuk RSJ! (Efek belum aktif)");
                } else if (pos === 10) { // Toko Emas
                    showMsg("Toko Emas", "Beli emas KW?");
                } else if (pos === 15) { // Melamar
                    showMsg("NEKAT MELAMAR", "Deg-degan...");
                }
            }, 500);
        }

        // Start
        updatePosition();

    </script>
</body>
</html>
